import{SvelteComponent as t,init as e,safe_not_equal as n,binding_callbacks as r,bind as o,element as l,create_component as s,space as i,attr as m,insert as a,mount_component as c,add_flush_callback as f,transition_in as $,transition_out as p,detach as u,destroy_component as g,afterUpdate as d,empty as w,group_outros as y,check_outros as _,destroy_each as h,noop as x,text as b,set_data as k}from"../../../../node_modules/svelte/internal/index.js";import{interpolate as v}from"../../_utilities/i18n.utilities.js";import j from"../../components/_utilities/locale-strings.js";import E from"../../components/primitives/alert/alert.js";import F from"../../components/primitives/button/button.js";import{convertStringToKey as N}from"../_utilities/step.utilities.js";import I from"../../components/primitives/form/form.js";import M from"../../components/icons/key-icon.js";import{mapCallbackToComponent as B}from"../_utilities/map-callback.utilities.js";import S from"../../components/primitives/spinner/spinner.js";function A(t,e,n){const r=t.slice();r[10]=e[n],r[13]=n;const o=r[7](r[10]);return r[11]=o,r}function C(t){let e,n,r,o,f,d,w,x=t[1]&&V(t),b=t[3]?.callbacks,k=[];for(let e=0;e<b.length;e+=1)k[e]=z(A(t,b,e));const v=t=>p(k[t],1,1,(()=>{k[t]=null}));return r=new F({props:{busy:t[2],style:"primary",type:"submit",width:"full",$$slots:{default:[O]},$$scope:{ctx:t}}}),d=new j({props:{key:"dontHaveAnAccount",html:!0}}),{c(){x&&x.c(),e=i();for(let t=0;t<k.length;t+=1)k[t].c();n=i(),s(r.$$.fragment),o=i(),f=l("p"),s(d.$$.fragment),m(f,"class","tw_text-center tw_py-4 tw_text-secondary-dark dark:tw_text-secondary-light")},m(t,l){x&&x.m(t,l),a(t,e,l);for(let e=0;e<k.length;e+=1)k[e].m(t,l);a(t,n,l),c(r,t,l),a(t,o,l),a(t,f,l),c(d,f,null),w=!0},p(t,o){if(t[1]?x?(x.p(t,o),2&o&&$(x,1)):(x=V(t),x.c(),$(x,1),x.m(e.parentNode,e)):x&&(y(),p(x,1,1,(()=>{x=null})),_()),136&o){let e;for(b=t[3]?.callbacks,e=0;e<b.length;e+=1){const r=A(t,b,e);k[e]?(k[e].p(r,o),$(k[e],1)):(k[e]=z(r),k[e].c(),$(k[e],1),k[e].m(n.parentNode,n))}for(y(),e=b.length;e<k.length;e+=1)v(e);_()}const l={};4&o&&(l.busy=t[2]),16384&o&&(l.$$scope={dirty:o,ctx:t}),r.$set(l)},i(t){if(!w){$(x);for(let t=0;t<b.length;t+=1)$(k[t]);$(r.$$.fragment,t),$(d.$$.fragment,t),w=!0}},o(t){p(x),k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)p(k[t]);p(r.$$.fragment,t),p(d.$$.fragment,t),w=!1},d(t){x&&x.d(t),t&&u(e),h(k,t),t&&u(n),g(r,t),t&&u(o),t&&u(f),g(d)}}}function H(t){let e,n,r;return n=new S({props:{colorClass:"tw_text-primary-light",layoutClasses:"tw_h-28 tw_w-28"}}),{c(){e=l("div"),s(n.$$.fragment),m(e,"class","tw_text-center tw_w-full tw_py-4")},m(t,o){a(t,e,o),c(n,e,null),r=!0},p:x,i(t){r||($(n.$$.fragment,t),r=!0)},o(t){p(n.$$.fragment,t),r=!1},d(t){t&&u(e),g(n)}}}function V(t){let e,n;return e=new E({props:{type:"error",needsFocus:t[5],$$slots:{default:[W]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},m(t,r){c(e,t,r),n=!0},p(t,n){const r={};32&n&&(r.needsFocus=t[5]),16450&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){g(e,t)}}}function W(t){let e,n=v(t[6],null,t[1])+"";return{c(){e=b(n)},m(t,n){a(t,e,n)},p(t,r){66&r&&n!==(n=v(t[6],null,t[1])+"")&&k(e,n)},d(t){t&&u(e)}}}function z(t){let e,n,r;var o=B(t[10]);function l(t){return{props:{callback:t[10],idx:t[13],firstInvalidInput:t[11]}}}return o&&(e=new o(l(t))),{c(){e&&s(e.$$.fragment),n=w()},m(t,o){e&&c(e,t,o),a(t,n,o),r=!0},p(t,r){const i={};if(8&r&&(i.callback=t[10]),8&r&&(i.firstInvalidInput=t[11]),o!==(o=B(t[10]))){if(e){y();const t=e;p(t.$$.fragment,1,0,(()=>{g(t,1)})),_()}o?(e=new o(l(t)),s(e.$$.fragment),$(e.$$.fragment,1),c(e,n.parentNode,n)):e=null}else o&&e.$set(i)},i(t){r||(e&&$(e.$$.fragment,t),r=!0)},o(t){e&&p(e.$$.fragment,t),r=!1},d(t){t&&u(n),e&&g(e,t)}}}function O(t){let e,n;return e=new j({props:{key:"loginButton"}}),{c(){s(e.$$.fragment)},m(t,r){c(e,t,r),n=!0},p:x,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){g(e,t)}}}function P(t){let e,n,r,o;const l=[H,C],s=[];function i(t,e){return t[3]?"Step"===t[3].type?1:-1:0}return~(e=i(t))&&(n=s[e]=l[e](t)),{c(){n&&n.c(),r=w()},m(t,n){~e&&s[e].m(t,n),a(t,r,n),o=!0},p(t,o){let m=e;e=i(t),e===m?~e&&s[e].p(t,o):(n&&(y(),p(s[m],1,1,(()=>{s[m]=null})),_()),~e?(n=s[e],n?n.p(t,o):(n=s[e]=l[e](t),n.c()),$(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||($(n),o=!0)},o(t){p(n),o=!1},d(t){~e&&s[e].d(t),t&&u(r)}}}function q(t){let e,n,d,w,y,_,h,x,b;function k(e){t[8](e)}n=new M({props:{classes:"tw_text-gray-400 tw_fill-current",size:"72px"}}),y=new j({props:{key:"loginHeader"}});let v={onSubmitWhenValid:t[4],$$slots:{default:[P]},$$scope:{ctx:t}};return void 0!==t[0]&&(v.formEl=t[0]),h=new I({props:v}),r.push((()=>o(h,"formEl",k))),{c(){e=l("div"),s(n.$$.fragment),d=i(),w=l("h1"),s(y.$$.fragment),_=i(),s(h.$$.fragment),m(e,"class","tw_flex tw_justify-center"),m(w,"class","tw_primary-header dark:tw_primary-header_dark")},m(t,r){a(t,e,r),c(n,e,null),a(t,d,r),a(t,w,r),c(y,w,null),a(t,_,r),c(h,t,r),b=!0},p(t,[e]){const n={};16&e&&(n.onSubmitWhenValid=t[4]),16494&e&&(n.$$scope={dirty:e,ctx:t}),!x&&1&e&&(x=!0,n.formEl=t[0],f((()=>x=!1))),h.$set(n)},i(t){b||($(n.$$.fragment,t),$(y.$$.fragment,t),$(h.$$.fragment,t),b=!0)},o(t){p(n.$$.fragment,t),p(y.$$.fragment,t),p(h.$$.fragment,t),b=!1},d(t){t&&u(e),g(n),t&&u(d),t&&u(w),g(y),t&&u(_),g(h,t)}}}function D(t,e,n){let{failureMessage:r}=e,{formEl:o=null}=e,{loading:l}=e,{step:s}=e,{submitForm:i}=e,m=!1,a="",c=!1;return d((()=>{r&&!c&&n(5,m=!0)})),t.$$set=t=>{"failureMessage"in t&&n(1,r=t.failureMessage),"formEl"in t&&n(0,o=t.formEl),"loading"in t&&n(2,l=t.loading),"step"in t&&n(3,s=t.step),"submitForm"in t&&n(4,i=t.submitForm)},t.$$.update=()=>{2&t.$$.dirty&&n(6,a=N(r))},[o,r,l,s,i,m,a,function(t){return!(!t.getOutputByName("failedPolicies",[]).length||c)&&(console.log(t),c=!0,!0)},function(t){o=t,n(0,o)}]}class G extends t{constructor(t){super(),e(this,t,D,q,n,{failureMessage:1,formEl:0,loading:2,step:3,submitForm:4})}}export{G as default};