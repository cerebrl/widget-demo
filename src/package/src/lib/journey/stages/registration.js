import{SvelteComponent as t,init as e,safe_not_equal as n,binding_callbacks as r,bind as o,element as l,create_component as s,space as i,attr as m,insert as a,mount_component as f,add_flush_callback as c,transition_in as $,transition_out as p,detach as u,destroy_component as g,empty as d,group_outros as w,check_outros as y,destroy_each as _,noop as h,text as x,set_data as b}from"../../../../node_modules/svelte/internal/index.js";import{interpolate as k}from"../../_utilities/i18n.utilities.js";import v from"../../components/_utilities/locale-strings.js";import j from"../../components/primitives/alert/alert.js";import E from"../../components/primitives/button/button.js";import{convertStringToKey as N}from"../_utilities/step.utilities.js";import F from"../../components/primitives/form/form.js";import I from"../../components/icons/new-user-icon.js";import{mapCallbackToComponent as M}from"../_utilities/map-callback.utilities.js";import B from"../../components/primitives/spinner/spinner.js";function S(t,e,n){const r=t.slice();r[9]=e[n],r[12]=n;const o=r[6](r[9]);return r[10]=o,r}function A(t){let e,n,r,o,l=t[1]&&H(t),m=t[3]?.callbacks,c=[];for(let e=0;e<m.length;e+=1)c[e]=W(S(t,m,e));const d=t=>p(c[t],1,1,(()=>{c[t]=null}));return r=new E({props:{busy:t[2],style:"primary",type:"submit",width:"full",$$slots:{default:[z]},$$scope:{ctx:t}}}),{c(){l&&l.c(),e=i();for(let t=0;t<c.length;t+=1)c[t].c();n=i(),s(r.$$.fragment)},m(t,s){l&&l.m(t,s),a(t,e,s);for(let e=0;e<c.length;e+=1)c[e].m(t,s);a(t,n,s),f(r,t,s),o=!0},p(t,o){if(t[1]?l?(l.p(t,o),2&o&&$(l,1)):(l=H(t),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(w(),p(l,1,1,(()=>{l=null})),y()),72&o){let e;for(m=t[3]?.callbacks,e=0;e<m.length;e+=1){const r=S(t,m,e);c[e]?(c[e].p(r,o),$(c[e],1)):(c[e]=W(r),c[e].c(),$(c[e],1),c[e].m(n.parentNode,n))}for(w(),e=m.length;e<c.length;e+=1)d(e);y()}const s={};4&o&&(s.busy=t[2]),8192&o&&(s.$$scope={dirty:o,ctx:t}),r.$set(s)},i(t){if(!o){$(l);for(let t=0;t<m.length;t+=1)$(c[t]);$(r.$$.fragment,t),o=!0}},o(t){p(l),c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)p(c[t]);p(r.$$.fragment,t),o=!1},d(t){l&&l.d(t),t&&u(e),_(c,t),t&&u(n),g(r,t)}}}function C(t){let e,n,r;return n=new B({props:{colorClass:"tw_text-primary-light",layoutClasses:"tw_h-28 tw_w-28"}}),{c(){e=l("div"),s(n.$$.fragment),m(e,"class","tw_text-center tw_w-full tw_py-4")},m(t,o){a(t,e,o),f(n,e,null),r=!0},p:h,i(t){r||($(n.$$.fragment,t),r=!0)},o(t){p(n.$$.fragment,t),r=!1},d(t){t&&u(e),g(n)}}}function H(t){let e,n;return e=new j({props:{type:"error",$$slots:{default:[V]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},m(t,r){f(e,t,r),n=!0},p(t,n){const r={};8226&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){g(e,t)}}}function V(t){let e,n=k(t[5],null,t[1])+"";return{c(){e=x(n)},m(t,n){a(t,e,n)},p(t,r){34&r&&n!==(n=k(t[5],null,t[1])+"")&&b(e,n)},d(t){t&&u(e)}}}function W(t){let e,n,r;var o=M(t[9]);function l(t){return{props:{callback:t[9],idx:t[12],firstInvalidInput:t[10]}}}return o&&(e=new o(l(t))),{c(){e&&s(e.$$.fragment),n=d()},m(t,o){e&&f(e,t,o),a(t,n,o),r=!0},p(t,r){const i={};if(8&r&&(i.callback=t[9]),8&r&&(i.firstInvalidInput=t[10]),o!==(o=M(t[9]))){if(e){w();const t=e;p(t.$$.fragment,1,0,(()=>{g(t,1)})),y()}o?(e=new o(l(t)),s(e.$$.fragment),$(e.$$.fragment,1),f(e,n.parentNode,n)):e=null}else o&&e.$set(i)},i(t){r||(e&&$(e.$$.fragment,t),r=!0)},o(t){e&&p(e.$$.fragment,t),r=!1},d(t){t&&u(n),e&&g(e,t)}}}function z(t){let e,n;return e=new v({props:{key:"registerButton"}}),{c(){s(e.$$.fragment)},m(t,r){f(e,t,r),n=!0},p:h,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){g(e,t)}}}function O(t){let e,n,r,o;const l=[C,A],s=[];function i(t,e){return t[3]?"Step"===t[3].type?1:-1:0}return~(e=i(t))&&(n=s[e]=l[e](t)),{c(){n&&n.c(),r=d()},m(t,n){~e&&s[e].m(t,n),a(t,r,n),o=!0},p(t,o){let m=e;e=i(t),e===m?~e&&s[e].p(t,o):(n&&(w(),p(s[m],1,1,(()=>{s[m]=null})),y()),~e?(n=s[e],n?n.p(t,o):(n=s[e]=l[e](t),n.c()),$(n,1),n.m(r.parentNode,r)):n=null)},i(t){o||($(n),o=!0)},o(t){p(n),o=!1},d(t){~e&&s[e].d(t),t&&u(r)}}}function P(t){let e,n,d,w,y,_,h,x,b,k,j,E;function N(e){t[7](e)}n=new I({props:{classes:"tw_text-gray-400 tw_fill-current",size:"72px"}}),y=new v({props:{key:"registerHeader"}}),x=new v({props:{key:"alreadyHaveAnAccount",html:!0}});let M={onSubmitWhenValid:t[4],$$slots:{default:[O]},$$scope:{ctx:t}};return void 0!==t[0]&&(M.formEl=t[0]),k=new F({props:M}),r.push((()=>o(k,"formEl",N))),{c(){e=l("div"),s(n.$$.fragment),d=i(),w=l("h1"),s(y.$$.fragment),_=i(),h=l("p"),s(x.$$.fragment),b=i(),s(k.$$.fragment),m(e,"class","tw_flex tw_justify-center"),m(w,"class","tw_primary-header dark:tw_primary-header_dark"),m(h,"class","tw_text-center tw_-mt-5 tw_mb-2 tw_py-4 tw_text-secondary-dark dark:tw_text-secondary-light")},m(t,r){a(t,e,r),f(n,e,null),a(t,d,r),a(t,w,r),f(y,w,null),a(t,_,r),a(t,h,r),f(x,h,null),a(t,b,r),f(k,t,r),E=!0},p(t,[e]){const n={};16&e&&(n.onSubmitWhenValid=t[4]),8238&e&&(n.$$scope={dirty:e,ctx:t}),!j&&1&e&&(j=!0,n.formEl=t[0],c((()=>j=!1))),k.$set(n)},i(t){E||($(n.$$.fragment,t),$(y.$$.fragment,t),$(x.$$.fragment,t),$(k.$$.fragment,t),E=!0)},o(t){p(n.$$.fragment,t),p(y.$$.fragment,t),p(x.$$.fragment,t),p(k.$$.fragment,t),E=!1},d(t){t&&u(e),g(n),t&&u(d),t&&u(w),g(y),t&&u(_),t&&u(h),g(x),t&&u(b),g(k,t)}}}function q(t,e,n){let{failureMessage:r}=e,{formEl:o=null}=e,{loading:l}=e,{step:s}=e,{submitForm:i}=e,m="",a=!1;return t.$$set=t=>{"failureMessage"in t&&n(1,r=t.failureMessage),"formEl"in t&&n(0,o=t.formEl),"loading"in t&&n(2,l=t.loading),"step"in t&&n(3,s=t.step),"submitForm"in t&&n(4,i=t.submitForm)},t.$$.update=()=>{2&t.$$.dirty&&n(5,m=N(r))},[o,r,l,s,i,m,function(t){return!(!t.getOutputByName("failedPolicies",[]).length||a)&&(console.log(t),a=!0,!0)},function(t){o=t,n(0,o)}]}class D extends t{constructor(t){super(),e(this,t,q,P,n,{failureMessage:1,formEl:0,loading:2,step:3,submitForm:4})}}export{D as default};