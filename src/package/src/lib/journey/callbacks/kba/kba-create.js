import{SvelteComponent as e,init as t,safe_not_equal as n,binding_callbacks as s,bind as a,element as i,create_component as r,space as o,attr as l,insert as u,append as c,mount_component as p,transition_in as m,group_outros as f,transition_out as $,check_outros as d,add_flush_callback as g,detach as k,destroy_component as b,component_subscribe as w}from"../../../../../node_modules/svelte/internal/index.js";import{writable as y}from"../../../../../node_modules/svelte/store/index.js";import v from"../../../components/compositions/input-floating/floating-label.js";import I from"../../../components/compositions/select-floating/floating-label.js";import h from"../../../components/_utilities/locale-strings.js";import{interpolate as _}from"../../../_utilities/i18n.utilities.js";import x from"../../../components/icons/lock-icon.js";function Q(e){let t,n;return t=new v({props:{firstInvalidInput:!1,key:`kba-custom-question-${e[1]}`,label:_("customSecurityQuestion"),showMessage:!1,message:_("inputRequiredError"),onChange:e[11],type:"text"}}),{c(){r(t.$$.fragment)},m(e,s){p(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.key=`kba-custom-question-${e[1]}`),t.$set(s)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function C(e){let t,n,w,y,C,j,A,q,D,U,P,E,K,M,O,R;w=new h({props:{key:"securityQuestions"}}),j=new h({props:{key:"securityQuestionsPrompt"}}),D=new x({props:{size:"18"}}),P=new I({props:{firstInvalidInput:!1,key:e[4],label:e[6],onChange:e[10],options:e[7]}});let V=e[2]&&Q(e);function z(t){e[13](t)}let S={firstInvalidInput:e[0],key:e[5]||`kba-answer-${e[1]}`,label:_("securityAnswer"),showMessage:!1,message:_("inputRequiredError"),onChange:e[9],type:"text"};return void 0!==e[3]&&(S.value=e[3]),M=new v({props:S}),s.push((()=>a(M,"value",z))),{c(){t=i("fieldset"),n=i("legend"),r(w.$$.fragment),y=o(),C=i("h2"),r(j.$$.fragment),A=o(),q=i("span"),r(D.$$.fragment),U=o(),r(P.$$.fragment),E=o(),V&&V.c(),K=o(),r(M.$$.fragment),l(n,"class","tw_sr-only"),l(C,"class","tw_kba-header dark:tw_kba-header_dark"),l(q,"class","tw_kba-lock-icon dark:tw_kba-lock-icon_dark"),l(t,"class","tw_kba-fieldset tw_input-spacing dark:tw_kba-fieldset_dark")},m(e,s){u(e,t,s),c(t,n),p(w,n,null),c(t,y),c(t,C),p(j,C,null),c(t,A),c(t,q),p(D,q,null),c(t,U),p(P,t,null),c(t,E),V&&V.m(t,null),c(t,K),p(M,t,null),R=!0},p(e,[n]){e[2]?V?(V.p(e,n),4&n&&m(V,1)):(V=Q(e),V.c(),m(V,1),V.m(t,K)):V&&(f(),$(V,1,1,(()=>{V=null})),d());const s={};1&n&&(s.firstInvalidInput=e[0]),2&n&&(s.key=e[5]||`kba-answer-${e[1]}`),!O&&8&n&&(O=!0,s.value=e[3],g((()=>O=!1))),M.$set(s)},i(e){R||(m(w.$$.fragment,e),m(j.$$.fragment,e),m(D.$$.fragment,e),m(P.$$.fragment,e),m(V),m(M.$$.fragment,e),R=!0)},o(e){$(w.$$.fragment,e),$(j.$$.fragment,e),$(D.$$.fragment,e),$(P.$$.fragment,e),$(V),$(M.$$.fragment,e),R=!1},d(e){e&&k(t),b(w),b(j),b(D),b(P),V&&V.d(),b(M)}}}function j(e,t,n){let s,{callback:a}=t,{firstInvalidInput:i}=t,{idx:r}=t;const o=a?.payload?.input,l=a?.payload?.input?.[0].name||`kba-${r}`,u=Array.isArray(o)&&o[1].name,c=a.getPrompt(),p=a.getPredefinedQuestions()?.map(((e,t)=>({text:e,value:`${t}`}))),m=y("");w(e,m,(e=>n(3,s=e)));let f,$=null,d=!1;try{f=a.getOutputValue("allowUserDefinedQuestions")}catch(e){console.error("`allowUserDefinedQuestions` property is missing in callback `KbaCreateCallback`")}return p.unshift({text:c,value:""}),f&&($=""+(p.length-1),p.push({text:_("provideCustomQuestion"),value:$})),e.$$set=e=>{"callback"in e&&n(12,a=e.callback),"firstInvalidInput"in e&&n(0,i=e.firstInvalidInput),"idx"in e&&n(1,r=e.idx)},e.$$.update=()=>{if(4096&e.$$.dirty)try{f=a.getOutputValue("allowUserDefinedQuestions")}catch(e){console.error("`allowUserDefinedQuestions` property is missing in callback `KbaCreateCallback`")}},[i,r,d,s,l,u,c,p,m,function(e){a.setAnswer(e.target.value)},function(e){const t=e.target.value;t===$?(n(2,d=!0),m.set(""),a.setAnswer("")):(n(2,d=!1),a.setQuestion(t))},function(e){const t=e.target.value;a.setQuestion(t)},a,function(e){s=e,m.set(s)}]}class A extends e{constructor(e){super(),t(this,e,j,C,n,{callback:12,firstInvalidInput:0,idx:1})}}export{A as default};